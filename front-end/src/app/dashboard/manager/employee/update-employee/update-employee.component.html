<div class="form-container">
  <h2>Update Employee</h2>

  <!-- SSN Search -->
  <div class="search-box" style="display: flex; align-items: center; justify-content: center;">
    <input type="text" name="ssnId" [(ngModel)]="ssnId" placeholder="Enter SSN ID" required
      style="margin-bottom: 0px;" />
    <button type="button" (click)="searchEmployee()" style="width: 100px;">Search</button>
  </div>

  <!-- Update Form -->
  <form (ngSubmit)="updateEmployee()" #empForm="ngForm" *ngIf="employee.userId">

    <!-- SSN ID (readonly) -->
    <div class="form-group">
      <label>SSN ID</label>
      <input type="text" name="userId" [(ngModel)]="employee.userId" placeholder="User ID" readonly disabled />
    </div>

    <!-- First Name -->
    <div class="form-group">
      <label>First Name</label>
      <input type="text" name="firstName" [(ngModel)]="employee.firstName" placeholder="First Name" required
        pattern="^[A-Za-z]{2,}$" #firstName="ngModel" />
      <div class="error" *ngIf="firstName.invalid && firstName.touched">
        <small *ngIf="firstName.errors?.['required']">First name is required.</small>
        <small *ngIf="firstName.errors?.['pattern']">Only alphabets allowed, minimum 2 characters.</small>
      </div>
    </div>

    <!-- Last Name -->
    <div class="form-group">
      <label>Last Name</label>
      <input type="text" name="lastName" [(ngModel)]="employee.lastName" placeholder="Last Name" required
        pattern="^[A-Za-z]{2,}$" #lastName="ngModel" />
      <div class="error" *ngIf="lastName.invalid && lastName.touched">
        <small *ngIf="lastName.errors?.['required']">Last name is required.</small>
        <small *ngIf="lastName.errors?.['pattern']">Only alphabets allowed, minimum 2 characters.</small>
      </div>
    </div>

    <!-- Email -->
    <div class="form-group">
      <label>Email</label>
      <input type="email" name="email" [(ngModel)]="employee.email" placeholder="Email" required
        pattern="^[a-zA-Z0-9]+([._%+-]?[a-zA-Z0-9]+)*@[a-zA-Z0-9-]+\.(com|in|org|net|edu|gov)$" #email="ngModel" />
      <div class="error" *ngIf="email.invalid && email.touched">
        <small *ngIf="email.errors?.['required']">Email is required.</small>
        <small *ngIf="email.errors?.['pattern']">Invalid email format (e.g., user@gmail.com).</small>
      </div>
    </div>

    <!-- Position -->
    <div class="form-group">
      <label>Position</label>
      <select name="position" [(ngModel)]="employee.position" required #position="ngModel" id="position">
        <option value="" disabled selected>Select Position</option>
        <option value="Bank Teller">HR</option>
        <option value="Customer Service Executive">Customer Service Executive</option>
        <option value="Relationship Manager">Relationship Manager</option>
        <option value="Branch Manager">Branch Manager</option>
        <option value="Assistant Branch Manager">Assistant Branch Manager</option>
        <option value="Loan Officer">Loan Officer</option>
        <option value="Credit Analyst">Credit Analyst</option>
        <option value="Operations Executive">Operations Executive</option>
        <option value="Accountant">Accountant</option>
        <option value="Auditor">Auditor</option>
        <option value="IT Officer">IT Officer</option>
        <option value="Cybersecurity Analyst">Cybersecurity Analyst</option>
        <option value="Clerk">Clerk</option>
        <option value="Probationary Officer">Probationary Officer</option>
        <option value="Cashier">Cashier</option>
        <option value="Marketing Executive">Marketing Executive</option>
        <option value="Financial Advisor">Financial Advisor</option>
        <option value="Intern">Intern</option>
      </select>

      <div class="error" *ngIf="position.invalid && position.touched" >
        <small>Position is required.</small>
      </div>
    </div>

    <!-- Salary -->
    <div class="form-group">
      <label>Salary</label>
      <input type="number" name="salary" [(ngModel)]="employee.salary" placeholder="Salary" step="0.01" min="10000" max="100000000"
        required #salary="ngModel" />
      <div class="error" *ngIf="salary.invalid && salary.touched">
        <small *ngIf="salary.errors?.['required']">Salary is required.</small>
        <small *ngIf="salary.errors?.['min']">Salary must be at least ₹10,000.</small>
        <small *ngIf="salary.errors?.['max']">Salary can be at most ₹100,000,000.</small>
      </div>
    </div>

    <!-- Date of Joining -->
    <div class="form-group">
      <label>Date of Joining</label>
      <input type="date" name="dateOfJoining" [(ngModel)]="employee.dateOfJoining" required disabled />
    </div>

    <!-- Phone Number -->
    <div class="form-group">
      <label>Phone Number</label>
      <input type="text" name="phoneNumber" [(ngModel)]="employee.phoneNumber" placeholder="10-digit Indian number"
        required pattern="^[6-9][0-9]{9}$" #phoneNumber="ngModel" />
      <div class="error" *ngIf="phoneNumber.invalid && phoneNumber.touched">
        <small *ngIf="phoneNumber.errors?.['required']">Phone number is required.</small>
        <small *ngIf="phoneNumber.errors?.['pattern']">Enter valid 10-digit Indian number.</small>
      </div>
    </div>

    <!-- Submit -->
    <button type="submit" [disabled]="!empForm.form.valid">
      Update Employee
    </button>
  </form>

  <p class="message" *ngIf="message">{{ message }}</p>
</div>